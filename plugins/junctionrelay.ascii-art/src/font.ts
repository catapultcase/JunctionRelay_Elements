// ============================================================================
// ASCII art glyph definitions and rendering
//
// 5-row bitmap font with variable-width glyphs.
// '#' = filled pixel, ' ' = empty pixel.
// All rows within a glyph have identical length.
// ============================================================================

const GLYPHS: Record<string, string[]> = {
  // ── Digits ──────────────────────────────────────────────────────────────
  '0': [' ## ', '#  #', '#  #', '#  #', ' ## '],
  '1': [' # ', '## ', ' # ', ' # ', '###'],
  '2': [' ## ', '#  #', '  # ', ' #  ', '####'],
  '3': ['### ', '   #', ' ## ', '   #', '### '],
  '4': ['#  #', '#  #', '####', '   #', '   #'],
  '5': ['####', '#   ', '### ', '   #', '### '],
  '6': [' ## ', '#   ', '### ', '#  #', ' ## '],
  '7': ['####', '   #', '  # ', ' #  ', '#   '],
  '8': [' ## ', '#  #', ' ## ', '#  #', ' ## '],
  '9': [' ## ', '#  #', ' ###', '   #', ' ## '],

  // ── Letters ─────────────────────────────────────────────────────────────
  'A': [' ## ', '#  #', '####', '#  #', '#  #'],
  'B': ['### ', '#  #', '### ', '#  #', '### '],
  'C': [' ###', '#   ', '#   ', '#   ', ' ###'],
  'D': ['### ', '#  #', '#  #', '#  #', '### '],
  'E': ['####', '#   ', '### ', '#   ', '####'],
  'F': ['####', '#   ', '### ', '#   ', '#   '],
  'G': [' ## ', '#   ', '# ##', '#  #', ' ## '],
  'H': ['#  #', '#  #', '####', '#  #', '#  #'],
  'I': ['###', ' # ', ' # ', ' # ', '###'],
  'J': [' ###', '   #', '   #', '#  #', ' ## '],
  'K': ['#  #', '# # ', '##  ', '# # ', '#  #'],
  'L': ['#   ', '#   ', '#   ', '#   ', '####'],
  'M': ['#   #', '## ##', '# # #', '#   #', '#   #'],
  'N': ['#  #', '## #', '# ##', '#  #', '#  #'],
  'O': [' ## ', '#  #', '#  #', '#  #', ' ## '],
  'P': ['### ', '#  #', '### ', '#   ', '#   '],
  'Q': [' ## ', '#  #', '# ##', '#  #', ' ## '],
  'R': ['### ', '#  #', '### ', '# # ', '#  #'],
  'S': [' ###', '#   ', ' ## ', '   #', '### '],
  'T': ['#####', '  #  ', '  #  ', '  #  ', '  #  '],
  'U': ['#  #', '#  #', '#  #', '#  #', ' ## '],
  'V': ['#   #', '#   #', ' # # ', ' # # ', '  #  '],
  'W': ['#   #', '#   #', '# # #', '# # #', ' # # '],
  'X': ['#  #', ' ## ', ' ## ', ' ## ', '#  #'],
  'Y': ['#   #', ' # # ', '  #  ', '  #  ', '  #  '],
  'Z': ['####', '  # ', ' #  ', '#   ', '####'],

  // ── Symbols ─────────────────────────────────────────────────────────────
  ' ': ['  ', '  ', '  ', '  ', '  '],
  '.': [' ', ' ', ' ', ' ', '#'],
  ',': [' ', ' ', ' ', '#', '# '],
  '-': ['    ', '    ', '####', '    ', '    '],
  '+': ['  #  ', '  #  ', '#####', '  #  ', '  #  '],
  ':': [' ', '#', ' ', '#', ' '],
  '!': ['#', '#', '#', ' ', '#'],
  '?': [' ## ', '#  #', '  # ', '    ', '  # '],
  '/': ['   #', '  # ', ' #  ', '#   ', '    '],
  '%': ['## #', '  # ', ' #  ', ' # #', '#  #'],
  '°': [' # ', '# #', ' # ', '   ', '   '],
  '=': ['    ', '####', '    ', '####', '    '],
  '_': ['    ', '    ', '    ', '    ', '####'],
  '(': [' #', '# ', '# ', '# ', ' #'],
  ')': ['# ', ' #', ' #', ' #', '# '],
};

/** Fallback glyph for characters not in the font. */
const UNKNOWN: string[] = ['###', '# #', '###', '# #', '###'];

/**
 * Convert a text string into 5 lines of ASCII art.
 * @param text   The string to render.
 * @param fill   Character to substitute for '#' in the glyph data.
 * @returns      Array of 5 strings (one per row).
 */
export function renderAsciiArt(text: string, fill: string = '#'): string[] {
  const rows: string[] = ['', '', '', '', ''];
  const blank = fill === '#' ? ' ' : ' ';

  for (let i = 0; i < text.length; i++) {
    const ch = text[i];
    const glyph = GLYPHS[ch] ?? GLYPHS[ch.toUpperCase()] ?? UNKNOWN;

    for (let r = 0; r < 5; r++) {
      if (i > 0) rows[r] += blank; // 1-char gap between glyphs
      rows[r] += glyph[r].replace(/#/g, fill);
    }
  }

  return rows;
}
